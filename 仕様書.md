# Anti-Recommend Search（ARS）仕様書

## 1. 背景・目的

### 1.1 背景課題

現在の検索エンジンは以下の傾向がある：

- SEO最適化記事が上位表示されやすい
- 広告・アフィリエイト中心のコンテンツが多い
- 大手ブランド・大規模メディアが優先表示される
- 「おすすめ〇選」「ランキング」型記事の氾濫

その結果、本当に個性的な個人サイトや小規模事業者が発見しにくい。

---

### 1.2 本プロダクトの目的

検索結果から「商業バイアス」「トレンドバイアス」を除去し、

**埋もれた個人コンテンツのみを抽出する検索体験を提供する。**

---

## 2. コンセプト定義

### 2.1 アンチ・レコメンドとは

```
通常検索結果
− 広告性
− 大手ドメイン
− SEOテンプレ構造
− 高頻出トレンドワード
= アンチ検索結果
```

対象とするコンテンツ：

- 個人ブログ
- 小規模オンラインショップ
- 独自ドメインの体験記
- ニッチ専門サイト

---

## 3. システム構成

### 3.1 アーキテクチャ概要

```
ユーザー入力
      ↓
検索API取得
      ↓
メタデータ抽出
      ↓
アンチフィルタリングエンジン（Python）
      ↓
アンチスコアリング
      ↓
ランキング表示
```

---

## 4. 技術要件

| 項目 | 技術 |
|------|------|
| 言語 | Python 3.11+ |
| UI | Streamlit |
| 検索API | Bing Web Search API |
| HTML解析 | BeautifulSoup |
| NLP | SudachiPy |
| DB | SQLite |
| 拡張 | Embedding API |

---

## 5. 機能要件

---

### 5.1 検索取得機能

#### 入力
- キーワード（日本語）
- 取得件数（デフォルト50件）

#### 出力
- URL
- タイトル
- スニペット
- 検索順位

---

### 5.2 アンチフィルタリングエンジン

#### (A) ブラックリストドメイン除外

例：

- amazon.co.jp
- rakuten.co.jp
- wikipedia.org
- note.com
- qiita.com
- 大手ニュースサイト

ロジック例：

```python
if domain in blacklist:
    exclude = True
```

---

#### (B) SEOワードスコア

対象ワード例：

- おすすめ
- ランキング
- 比較
- 最新
- 徹底
- まとめ

スコア算出：

```
SEO_score = 出現回数 × 重み
```

一定値以上で減点。

---

#### (C) 広告検出

判定基準：

- aタグ数 > N
- アフィリエイトパラメータ（ref=, affiliate=）
- Amazon・楽天リンク検出

```
Ad_score = affiliate_link_count × 2
```

---

#### (D) 大手ドメイン推定

判定基準例：

- 企業名含有
- 明確な運営会社情報
- プライバシーポリシー構造
- 検索順位が上位

---

### 5.3 個人性スコア加点

判定基準：

- 一人称頻度（私 / 僕 / 体験）
- プロフィール欄の存在
- 更新履歴形式がブログ型
- サイト規模が小さい

```
Personal_score = 一人称出現回数 × 重み
```

---

## 6. アンチスコア算出式

```
AntiScore =
  + (Personal_score × 3)
  - (SEO_score × 2)
  - (Ad_score × 2)
  - (Brand_score × 3)
  - (Rank_penalty)
```

### Rank_penalty

```
Rank_penalty = max(0, (20 - rank))
```

---

## 7. UI仕様

### 7.1 表示項目

- タイトル
- URL
- アンチスコア
- 個人性指数
- 商業性指数
- 判定理由ログ

---

### 7.2 判定理由の表示例

```
このページが選ばれた理由：
・アフィリエイトリンク 0件
・SEOワード含有率 低
・独自ドメイン
・検索順位 18位
```

---

## 8. 拡張機能（フェーズ2）

### 8.1 通常検索との比較モード

通常ランキングとアンチランキングを並列表示。

---

### 8.2 未発見度スコア

```
DiscoveryScore =
  1 / (推定アクセス数 × SNS言及数)
```

---

### 8.3 Chrome拡張化

通常検索ページに「アンチ表示」ボタンを追加。

---

## 9. 非機能要件

- 50件処理で3秒以内
- 並列スクレイピング対応
- API制限対応（キャッシュ実装）
- ログ保存機能

---

## 10. MVP定義

実装対象：

- 検索API取得
- ブラックリスト除外
- SEOワード減点
- 個人性スコア加点
- Streamlit表示

---

## 11. 将来ビジョン

- LLMによる商業性判定
- ユーザー評価フィードバック機能
- ニッチ分野特化版
- API公開

---

## 12. 成功指標（KPI）

- 検索あたりのクリック率
- ユーザー保存率
- 通常検索との差異度
- 主観満足度

---

## 13. 想定ユーザー

- ニッチ趣味層
- 研究者
- 個人開発者
- デジタル探検志向ユーザー
